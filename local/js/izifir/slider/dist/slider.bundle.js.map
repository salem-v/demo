{"version":3,"file":"slider.bundle.js","sources":["../src/slider.js"],"sourcesContent":["import './style/style.scss';\r\nimport 'ui.core';\r\nimport {Animate} from 'izifir.animate';\r\n\r\nexport class Slider\r\n{\r\n  constructor (selector, params = {})\r\n  {\r\n    this.selector = selector;\r\n    this.startSlide = params.startSlide || 0; // первый слайд\r\n    this.showArrows = params.showArrows || true; // Показывать стрелки\r\n    this.showDots = params.showDots || true; //Показывать точки\r\n    this.autoplay = params.autoplay || false; // Автопрокрутка\r\n\r\n\r\n    this.currentSlide = this.startSlide;\r\n    this.animated = false;\r\n    this.timer = null;\r\n    this.root = document.querySelector(this.selector);\r\n\r\n    if (this.root) {\r\n      this.init();\r\n    }\r\n\r\n    /*const previous = document.querySelector('[data-control=\"prev\"]');\r\n    const next = document.querySelector('[data-control=\"next\"]');\r\n    const slides = document.querySelector('[data-slide]');\r\n    let current = 0;\r\n\r\n    // Code that moves to the next slide\r\n    next.addEventListener(\"click\", function () {\r\n      slides[current].removeAttribute(\"active\");\r\n      current ++;\r\n      if (current === slides.length)\r\n        current = 0;\r\n      slides[current].setAttribute(\"active\");\r\n    });\r\n\r\n    // Code that moves to the previous slide\r\n    previous.addEventListener(\"click\", function () {\r\n      slides[current].removeAttribute(\"active\");\r\n      current --;\r\n      if (current < 0)\r\n        current = (slides.length - 1);\r\n      slides[current].setAttribute(\"active\");\r\n    });*/\r\n  }\r\n\r\n  init ()\r\n  {\r\n    this.slides = this.root.querySelectorAll('[data-slide]');\r\n\r\n    if (this.slides.length) {\r\n      this.initSlides();\r\n      this.initArrows();\r\n      this.initTimer();\r\n      this.initDots();\r\n    }\r\n  }\r\n\r\n  initSlides ()\r\n  {\r\n    [].forEach.call(this.slides, (slide, key) => {\r\n      if (key === this.startSlide) {\r\n        slide.dataset.slide = 'active';\r\n        slide.style.zIndex = '10';\r\n        this.currentSlide = key;\r\n      }\r\n\r\n      slide.dataset.slideIndex = key;\r\n    });\r\n  }\r\n\r\n  initArrows()\r\n  {\r\n    if (this.showArrows && this.slides.length > 1) {\r\n      const prev = document.createElement('button');\r\n      prev.dataset.arrow = 'prev';\r\n      prev.innerHTML = 'prev';\r\n      prev.addEventListener('click', this.goPrev.bind(this));\r\n\r\n      const next = document.createElement('button');\r\n      next.dataset.arrow = 'next';\r\n      next.innerHTML = \"<p>next</p>\";\r\n      next.addEventListener('click', this.goNext.bind(this));\r\n\r\n      this.root.appendChild(prev);\r\n      this.root.appendChild(next);\r\n    }\r\n  }\r\n\r\n  initDots()\r\n  {\r\n    if (this.showDots && this.slides.length > 1) {\r\n      for (let i = 0; i < this.slides.length; i++) {\r\n        const dot = document.createElement('div');\r\n        dot.innerHTML = \"<div data-dot-style></div>\";\r\n        dot.dataset.dot = '';\r\n\r\n        dot.addEventListener('click', () => {\r\n          this.goTo(i);\r\n        });\r\n\r\n        this.root.appendChild(dot);\r\n      }\r\n    }\r\n  }\r\n\r\n  run()\r\n  {\r\n    this.start = performance.now(); //start animation\r\n    this.requestId = requestAnimationFrame(this.goTo.bind(this));\r\n  }\r\n\r\n  goTo(index, direct = '')\r\n  {\r\n    const nextSlide = this.root.querySelector('[data-slide-index=\"' + index + '\"]');\r\n    const currentSlide = this.root.querySelector('[data-slide-index=\"' + this.currentSlide + '\"]');\r\n    if (nextSlide && !this.animated) {\r\n      if (!direct) {\r\n        direct = (index > this.currentSlide) ? 'left' : 'right';\r\n      }\r\n\r\n      this.animated = true;\r\n      currentSlide.style.zIndex = '10';\r\n      nextSlide.style.zIndex = '9';\r\n      nextSlide.dataset.slide = 'active';\r\n\r\n      /*const easing = new BX.easing({\r\n        duration: 700,\r\n        start: { right: 0 },\r\n        finish: { right: 100 },\r\n        step: state => {\r\n          if (direct === 'left')\r\n            currentSlide.style.clipPath = 'inset(0% ' + state.right + '% 0% 0%)';\r\n          else\r\n            currentSlide.style.clipPath = 'inset(0% 0% 0% ' + state.right + '%)';\r\n        },\r\n        complete: () => {\r\n          currentSlide.dataset.slide = '';\r\n          currentSlide.style.zIndex = '1';\r\n          currentSlide.style.clipPath = 'inset(0% 0% 0% 0%)';\r\n          nextSlide.style.zIndex = '10';\r\n          this.currentSlide = index;\r\n          this.initTimer();\r\n          this.animated = false;\r\n        }\r\n      });\r\n      easing.animate();*/\r\n\r\n      const easing = new Animate({\r\n        duration: 500,\r\n        step: function (progress) {\r\n          let step = progress * 100;\r\n          if (direct === 'left') {\r\n            currentSlide.style.clipPath = 'inset(0% ' + step + '% 0% 0%)';\r\n          } else {\r\n            currentSlide.style.clipPath = 'inset(0% 0% 0% ' + step + '%)';\r\n          }\r\n        },\r\n        complete: () => {\r\n          currentSlide.dataset.slide = '';\r\n          currentSlide.style.zIndex = '1';\r\n          currentSlide.style.clipPath = 'inset(0% 0% 0% 0%)';\r\n          nextSlide.style.zIndex = '10';\r\n          this.currentSlide = index;\r\n          this.initTimer();\r\n          this.animated = false;\r\n        }\r\n      });\r\n      easing.run();\r\n    }\r\n  }\r\n\r\n  initTimer() {\r\n    if (this.autoplay) {\r\n      if (this.timer) {\r\n        clearTimeout(this.timer);\r\n      }\r\n\r\n      this.timer = setTimeout(this.goNext.bind(this), 5000);\r\n    }\r\n  }\r\n\r\n  goNext() {\r\n    let next = this.currentSlide + 1;\r\n    if (next >= this.slides.length) {\r\n      next = 0;\r\n    }\r\n\r\n    this.goTo(next, 'left');\r\n  }\r\n\r\n  goPrev() {\r\n    let prev = this.currentSlide - 1;\r\n\r\n    console.log('slide id = ' + this.currentSlide);\r\n\r\n    if (prev < 0) {\r\n      prev = this.slides.length - 1;\r\n    }\r\n    console.log('prev = ' + prev)\r\n\r\n    this.goTo(prev, 'right');\r\n  }\r\n}"],"names":["constructor","selector","params","this","startSlide","showArrows","showDots","autoplay","currentSlide","animated","timer","root","document","querySelector","init","slides","querySelectorAll","length","initSlides","initArrows","initTimer","initDots","forEach","call","slide","key","dataset","style","zIndex","slideIndex","prev","createElement","arrow","innerHTML","addEventListener","goPrev","bind","next","goNext","appendChild","i","dot","goTo","run","start","performance","now","requestId","requestAnimationFrame","index","direct","nextSlide","Animate","duration","step","progress","clipPath","complete","clearTimeout","setTimeout","console","log"],"mappings":"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"}